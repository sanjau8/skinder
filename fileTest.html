<html>

    <head>

    </head>

    <body>

      <input type="text" placeholder="title" id="title">
      <textarea type="text" placeholder="caption" id="caption"> </textarea>

        <input type="file" id="fileUpload" />
        <input type="button" onclick="clicked()" value="submit">

        <!-- <img src="https://storage.googleapis.com/intern-hack.appspot.com/shiva.jpg_1613472324380"> -->
    </body>

    <script>
        document.querySelector('#fileUpload').addEventListener('change', event => {
  handleImageUpload(event)
})

function clicked(){
  var title=document.getElementById("title").value
  var caption=document.getElementById("caption").value
  
  const formData = new FormData()
  
  formData.append("Title",title)
  formData.append("Caption",caption)

  var headers = new Headers();
  headers.append('Content-Type','multipart/form-data')
  headers.append("Authorization","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiIxMTc0NjcwMzI2NTEwNTM5ODc3MDEiLCJlbWFpbCI6InNhbmpheS5iaGFyYWR3YWpAcHJhY3RvLmNvbSIsImlhdCI6MTYxMzkxMTU4NiwiZXhwIjoxNjEzOTE1MTg2fQ.iOgjPZa6LBUm9QhT0hXO6iDXQVAHTyOxONEko0ZlI7U")
  
  fetch('http://ec2-52-206-109-241.compute-1.amazonaws.com/team2practo/posts', {
    method: 'POST',
    body: formData,
    Headers:headers,
    credentials: 'include' 
  })
  .then(response => response.json())
  .then(data => {
    console.log(data)
  })
  .catch(error => {
    console.error(error)
  })
}





const handleImageUpload = event => {
  
  const files = event.target.files
  const formData = new FormData()
  formData.append('myFile', files[0])
  formData.append("Title","Shivammayam")
  formData.append("Caption","Om Namashivaya")

  var headers = new Headers();
  headers.append('Content-Type','multipart/form-data')
  headers.append("Authorization","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiIxMTc0NjcwMzI2NTEwNTM5ODc3MDEiLCJlbWFpbCI6InNhbmpheS5iaGFyYWR3YWpAcHJhY3RvLmNvbSIsImlhdCI6MTYxMzkxMTU4NiwiZXhwIjoxNjEzOTE1MTg2fQ.iOgjPZa6LBUm9QhT0hXO6iDXQVAHTyOxONEko0ZlI7U")
  
  fetch('http://http://ec2-52-206-109-241.compute-1.amazonaws.com/team2practo/posts', {
    method: 'POST',
    body: formData,
    Headers:headers,
    credentials: 'include' 
  })
  .then(response => response.json())
  .then(data => {
    console.log(data)
  })
  .catch(error => {
    console.error(error)
  })
}

    </script>
</html>